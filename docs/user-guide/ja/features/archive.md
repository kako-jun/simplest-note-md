# アーカイブ

使わなくなったノート/リーフを別の場所に保管できます。削除ではないので、いつでも戻せます。

---

## 2つのワールド

Agasteerには2つの独立した空間があります。

| ワールド    | 用途                   | Pull               |
| ----------- | ---------------------- | ------------------ |
| **Home**    | 普段使うノート・リーフ | 起動時に自動Pull   |
| **Archive** | 使わなくなったもの     | 開いたときだけPull |

> **💡 Tip**: ArchiveはHomeと完全に分離されているため、Homeが軽くなります。

---

## ワールドの切り替え方

1. パンくずリスト（`ホーム > ...`）の左端にある「**›**」をタップ
2. ドロップダウンが表示される
3. **Home** または **Archive** を選択

### 初回アクセス時

- Archiveを初めて開くとき、GitHubからデータがPullされる（数秒かかる場合あり）
- 2回目以降はキャッシュ済みで即座に表示

> **💡 進捗の確認**: アーカイブのトップ画面では、右下の統計表示（リーフ数・文字数）がリアルタイムで増加していきます。これにより、データ取得の進捗を確認できます。

### Homeに素早く戻る

ヘッダー左上のタイトル「Agasteer」をタップ → どこにいてもHomeトップに戻る

### ペインごとに独立

2ペイン表示時、**左右で異なるワールドを表示**できます。

- 左: Home、右: Archive
- 左右それぞれのパンくずリストで独立して切り替え可能
- アーカイブのリーフを見ながらHomeで執筆、などの使い方ができる

---

## アーカイブする

1. アーカイブしたいノートまたはリーフを開く
2. フッターの「**アーカイブ**」ボタンをタップ
3. 確認ダイアログで「OK」

### アーカイブ後の挙動

- Archiveワールドに移動される
- **階層構造は維持される**
  - 例: `ノートA/サブノートB/リーフC` → Archiveでも同じ階層
- ノートをアーカイブ → 中のサブノートとリーフも一緒に移動
- 操作後は親ノートに自動遷移

### 同名のものがある場合

Archive側に同名のノート/リーフがある場合、**操作前に確認ダイアログ**が表示されます。

**選択肢**:

| 選択           | 動作                                                                                   |
| -------------- | -------------------------------------------------------------------------------------- |
| **キャンセル** | 操作を中止                                                                             |
| **スキップ**   | 既存を優先し、移動しない                                                               |
| **追加**       | ノート：既存ノートの中にリーフを追加<br>リーフ：自動リネームして追加（例: `タスク_2`） |

> **💡 Tip**: 選択はその操作全体に適用されます。個別に選ぶ必要はありません。

---

## リストア（復元）する

1. **Archive**ワールドに切り替える
2. リストアしたいノートまたはリーフを開く
3. フッターの「**リストア**」ボタンをタップ
4. 確認ダイアログで「OK」

### リストア後の挙動

- Homeワールドに戻される
- 階層構造は維持される
- Home側に同名のものがある場合、確認ダイアログで処理方法を選択
